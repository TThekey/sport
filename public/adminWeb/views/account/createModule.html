<!-- 模板 -->

<div class="layui-fluid">
    <div class="layui-row">
        <div class="layui-col-xs12">
            <div class="layui-card">
                <div class="layui-card-header">用户购买模块开通</div>
                <div class="layui-card-body">
                    <form class="layui-form" action="">
                        <div class="layui-form-item">
                            <label class="layui-form-label">用户邮箱</label>
                            <div class="layui-input-block">
                                <input type="text" name="crea_email" required lay-verify="required|email" placeholder="example@email.com" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">订单来源</label>
                            <div class="layui-input-block">
                                <input type="radio" name="order_origin" value="1" title="淘宝" checked>
                                <input type="radio" name="order_origin" value="2" title="微信">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">订单号/微信号</label>
                            <div class="layui-input-inline">
                                <input type="text" name="order_no" required lay-verify="required" placeholder="淘宝-订单号，微信-微信号" autocomplete="off" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux"></div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">订单价格</label>
                            <div class="layui-input-inline">
                                <input type="text" name="order_price" required lay-verify="required" placeholder="请输入价格" autocomplete="off" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux"></div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">开通模块</label>
                            <div class="layui-input-block">
                                <div class="module-item">留学文书</div>
                                <div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[letter]" title="推荐信" value="1">
                                        <input type="text" name="amount[letter_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[ps]" title="个人陈述" value="1">
                                        <input type="text" name="amount[ps_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[cv]" title="个人简历" value="1">
                                        <input type="text" name="amount[cv_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[polish]" title="文书润色" value="1">
                                        <input type="text" name="amount[polish_amount]" class="checkbox-amount" value="1">
                                    </div>
                                </div>
                                <div class="module-item">雅思</div>
                                <div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[ielts]" title="雅思计划" value="1">
                                        <input type="text" name="amount[ielts_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[ielts_write]" title="雅思写作修改" value="1">
                                        <input type="text" name="amount[ielts_write_amount]" class="checkbox-amount" value="1">
                                    </div>
                                </div>
                                <div class="module-item">申请</div>
                                <div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[school]" title="选校" value="1">
                                        <input type="text" name="amount[school_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[dorm]" title="宿舍" value="1">
                                        <input type="text" name="amount[dorm_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[language]" title="语言班" value="1">
                                        <input type="text" name="amount[language_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[reply150]" title="申请150" value="1">
                                        <input type="text" name="amount[reply150_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[reply800]" title="申请800" value="1">
                                        <input type="text" name="amount[reply800_amount]" class="checkbox-amount" value="1">
                                    </div>
                                    <div class="item-item">
                                        <input type="checkbox" name="module[sign]" title="签证" value="1">
                                        <input type="text" name="amount[sign_amount]" class="checkbox-amount" value="1">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">业务员</label>
                            <div class="layui-input-block">
                                <select id="seller" name="seller" lay-verify="required">
                                </select>
                                <script type="text/html">
                                    <option value=""></option>
                                    {{#  layui.each(d.list, function(index, item){ }}
                                    <option value="{{d.u_id}}">{{d.u_names}}</option>
                                    {{#  }); }}
                                </script>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button class="layui-btn xxx" lay-submit lay-filter="formDemo">生成链接</button>
                                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 脚本 -->

<script>
    layui.use(['form','layer'], function() {
        var form = layui.form,
            $ = layui.jquery;
        layer = layui.layer;
        form.render();

        //监听提交
        form.on('submit(formDemo)', function(data) {
            console.log(data.field);
            $.ajax({
                url:'/manager/module/createModule',
                type:'POST',
                data:data.field,
                success:function (res) {
                    if(res.err_code == 0){
                        layer.confirm('激活链接：<span style="color:blue;">&nbsp;&nbsp;'+res.data+'</span>',{},function (index) {
                            layer.close(index);
                            window.location.reload();
                        })
                    }else{
                        layer.msg(res.msg);
                    }

                }
            })
            return false;
        });
    });
</script>
<!-- 样式 -->
<style scoped>
    .layui-input-block { margin-left:130px; !important; }
    .layui-form-label { width:100px; }
    .item-item {
        position:relative; display: inline-block;
        margin-right:30px;
    }
    .module-item{
        height:40px;
        line-height: 40px;
        position: relative;
    }
    .module-item:before {
        height:20px;
        position: absolute;
        top:10px;
        left:10px;
        width:5px;
        background-color:dodgerblue;
    }
    .layui-form-checkbox {
        margin:0 !important;
        padding-top:0;
    }
    .checkbox-amount {
        width:30px;
        height:30px;
        box-sizing: border-box;
        border:1px solid lightgray;
        outline: none;
        position:absolute;
        right:0;
        top:0;
        z-index: 10;
        text-align: center;
    }
</style>
